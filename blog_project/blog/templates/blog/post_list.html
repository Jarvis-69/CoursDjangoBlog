<!DOCTYPE html>
<html>
<head>
    <title>Blog</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <div class="container">
        <nav>
            <a href="{% url 'post_new' %}" class="create-button">Créer un nouvel article</a>
        </nav>

        <h1>Articles du Blog</h1>

        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% if posts %}
            <div class="post-list">
                {% for post in posts %}
                <article class="post-item">
                    <h2><a href="{% url 'post_detail' post.slug %}">{{ post.title }}</a></h2>
                    <div class="post-meta">
                        {% if post.category %}
                        <span class="category">{{ post.category }}</span>
                        {% endif %}
                        <span class="author">Par {{ post.author.username }}</span>
                        <time datetime="{{ post.created_at|date:'Y-m-d' }}">
                            {{ post.created_at|date:"d F Y" }}
                        </time>
                    </div>
                    {% if post.content %}
                    <p class="post-excerpt">{{ post.content|truncatewords:30 }}</p>
                    {% endif %}
                    <a href="{% url 'post_detail' post.slug %}" class="read-more">Lire la suite →</a>
                </article>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <p>Aucun article n'a été publié pour le moment.</p>
                <a href="{% url 'post_new' %}" class="create-button">Créer le premier article</a>
            </div>
        {% endif %}
    </div>
</body>
</html>